# Dockerfile para desenvolvimento (com volumes mount)
FROM python:3.11-slim

RUN apt-get update && apt-get install -y \
    build-essential \
    wget \
    curl \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /Verba

# Instala apenas dependências (código vem via volume)
COPY requirements-extensions.txt setup.py ./

# Instala Verba base
RUN pip install --no-cache-dir '.'

# Instala dependências das extensões
RUN pip install --no-cache-dir -r requirements-extensions.txt || true

# Baixa dados do NLTK
RUN python -c "import nltk; nltk.download('punkt', quiet=True)" || true

EXPOSE 8000

CMD ["verba", "start", "--port", "8000", "--host", "0.0.0.0"]

